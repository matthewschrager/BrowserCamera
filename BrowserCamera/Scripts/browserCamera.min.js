var Camera=function(){function n(){if(this.Video=document.createElement("video"),this.Video.autoplay=!0,this.Video.setAttribute("style","display: none"),this.Canvas=document.createElement("canvas"),this.Canvas.setAttribute("style","display: none"),document.getElementsByTagName("html")[0].appendChild(this.Video),document.getElementsByTagName("html")[0].appendChild(this.Canvas),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL)this.CreateObjectURL=window.URL.createObjectURL;else if(window.webkitURL)this.CreateObjectURL=window.webkitURL.createObjectURL;else if(window.mozURL)this.CreateObjectURL=window.mozURL.createObjectURL;else throw"No URL object found.";}return n.prototype.Initialize=function(n){var t=this;navigator.getUserMedia({video:!0},function(i){t.LocalMediaStream=i,n()},function(n){throw"Could not acquire device. Error: "+n;})},n.prototype.Shutdown=function(){this.Video.pause(),this.LocalMediaStream.stop(),this.Video.mozSrcObject?this.Video.mozSrcObject=null:this.Video.src=window.webkitURL?"":null},n.prototype.TakeSnapshot=function(n){var t=this;this.LocalMediaStream&&(this.Video.src=this.CreateObjectURL(this.LocalMediaStream),setTimeout(function(){t.Canvas.getContext("2d").drawImage(t.Video,0,0);var i=t.Canvas.toDataURL("image/png");n(i)},50))},n.prototype.PostSnapshot=function(n,t,i){this.TakeSnapshot(function(r){var u=r.replace("data:image/png;base64,",""),f='{ "'+t+'": "'+u+'" }';$.ajax({url:n,type:"POST",data:f,contentType:"application/json"}).done(function(n){return i(n)})})},n}()